<!--
# === FILE META OPENING ===
# file: ./timeseries-frontend/templates/timeseries/results.html
# role: frontend
# desc: main results page template that displays interactive charts and analysis results with tabbed navigation
# === FILE META CLOSING ===
-->

{% extends 'base.html' %}
{% load static %}

{% block title %}Lab:Results{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Analysis Results</h1>
    <div class="btn-group" role="group">
        <button id="download-api-response-btn" class="btn btn-outline-primary">
            <i class="bi bi-download"></i> Download Full API Response
        </button>
        <button id="view-api-response-btn" class="btn btn-outline-secondary">
            <i class="bi bi-eye"></i> View Raw JSON
        </button>
    </div>
</div>

<!-- view JSON payload -->
<div class="modal fade" id="jsonModal" tabindex="-1" aria-labelledby="jsonModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="jsonModalLabel">Raw API Response</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <small class="text-muted">
                        This is the complete JSON response from the API.
                    </small>
                </div>
                <pre id="json-content" style="max-height: 60vh; overflow: auto; background-color: #e6e9ed; padding: 1rem; border-radius: 0.375rem; font-size: 0.875rem;"></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="copy-json-btn">Copy to Clipboard</button>
            </div>
        </div>
    </div>
</div>

<div id="no-results" class="alert alert-warning" style="display: none;">
    <p>No analysis results found. Please run an analysis first.</p>
    <a href="{% url 'timeseries:analysis' %}" class="btn btn-primary">Go to Analysis</a>
</div>

<div id="results-container" style="display: none;">
    <!-- Main Navigation Tabs -->
    <ul class="nav nav-tabs mb-4" id="resultsTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" 
                    type="button" role="tab" aria-controls="overview" aria-selected="true">
                <i class="bi bi-speedometer2"></i> Overview
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="plots-tab" data-bs-toggle="tab" data-bs-target="#plots" 
                    type="button" role="tab" aria-controls="plots" aria-selected="false">
                <i class="bi bi-diagram-3"></i> Plots
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="statistical-tests-tab" data-bs-toggle="tab" data-bs-target="#statistical-tests" 
                    type="button" role="tab" aria-controls="statistical-tests" aria-selected="false">
                <i class="bi bi-graph-up"></i> Statistical Tests
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="models-tab" data-bs-toggle="tab" data-bs-target="#models" 
                    type="button" role="tab" aria-controls="models" aria-selected="false">
                <i class="bi bi-cpu"></i> Models & Forecasts
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="spillover-analysis-tab" data-bs-toggle="tab" data-bs-target="#spillover-analysis" 
                    type="button" role="tab" aria-controls="spillover-analysis" aria-selected="false">
                <i class="bi bi-shuffle"></i> Spillover Analysis
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="raw-data-tab" data-bs-toggle="tab" data-bs-target="#raw-data" 
                    type="button" role="tab" aria-controls="raw-data" aria-selected="false">
                <i class="bi bi-table"></i> Raw Data
            </button>
        </li>
    </ul>
    
    <div class="tab-content" id="resultsTabsContent">
        
        <!-- Overview Tab -->
        <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
            <div class="row">
                <div class="col-md-8">
                    <!-- Executive Summary Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0"><i class="bi bi-briefcase"></i> Executive Summary</h5>
                        </div>
                        <div class="card-body" id="executive-summary-content">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Key Insights Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0"><i class="bi bi-lightbulb"></i> Key Insights</h5>
                        </div>
                        <div class="card-body" id="key-insights-content">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <!-- Analysis Summary Card -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0"><i class="bi bi-info-circle"></i> Analysis Summary</h5>
                        </div>
                        <div class="card-body" id="analysis-summary-content">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Plotted Transformations Tab -->
        <div class="tab-pane fade" id="plots" role="tabpanel" aria-labelledby="plots-tab">
            {% if plots %}
            <div class="row mb-4">
                <div class="col-12">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Interactive Charts:</strong> All plots are generated server-side using Plotly and are fully interactive. 
                        You can zoom, pan, hover for details, and toggle series on/off by clicking the legend.
                    </div>
                </div>
            </div>
            
            <!-- Collapsible Data Sections -->
            <div class="accordion" id="dataLineageAccordion">
                <!-- Original Data -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOriginalData">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOriginalData" aria-expanded="true" aria-controls="collapseOriginalData">
                            <i class="bi bi-database me-2"></i> Original Price Data
                        </button>
                    </h2>
                    <div id="collapseOriginalData" class="accordion-collapse collapse show" aria-labelledby="headingOriginalData" data-bs-parent="#dataLineageAccordion">
                        <div class="accordion-body">
                            {% if plots.original_data %}
                            <div id="original-data-plot-container"></div>
                            <script>
                                var originalDataPlot = {{ plots.original_data|safe }};
                                Plotly.newPlot('original-data-plot-container', originalDataPlot.data, originalDataPlot.layout, {responsive: true});
                            </script>
                            {% else %}
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle"></i> Original price data plot not available.
                            </div>
                            {% endif %}
                            <div class="mt-3">
                                <button class="btn btn-outline-primary btn-sm" id="view-original-data-table">
                                    <i class="bi bi-table"></i> View Data Table
                                </button>
                                <button class="btn btn-outline-success btn-sm" id="export-original-data">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Returns Data -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingReturnsData">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseReturnsData" aria-expanded="false" aria-controls="collapseReturnsData">
                            <i class="bi bi-arrow-up-right me-2"></i> Returns Data
                        </button>
                    </h2>
                    <div id="collapseReturnsData" class="accordion-collapse collapse" aria-labelledby="headingReturnsData" data-bs-parent="#dataLineageAccordion">
                        <div class="accordion-body">
                            {% if plots.returns_data %}
                            <div id="returns-data-plot-container"></div>
                            <script>
                                var returnsDataPlot = {{ plots.returns_data|safe }};
                                Plotly.newPlot('returns-data-plot-container', returnsDataPlot.data, returnsDataPlot.layout, {responsive: true});
                            </script>
                            {% else %}
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle"></i> Returns data plot not available.
                            </div>
                            {% endif %}
                            <div class="mt-3">
                                <button class="btn btn-outline-primary btn-sm" id="view-returns-data-table">
                                    <i class="bi bi-table"></i> View Data Table
                                </button>
                                <button class="btn btn-outline-success btn-sm" id="export-returns-data">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Scaled Data -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingScaledData">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseScaledData" aria-expanded="false" aria-controls="collapseScaledData">
                            <i class="bi bi-arrows-expand me-2"></i> Scaled Data (for GARCH)
                        </button>
                    </h2>
                    <div id="collapseScaledData" class="accordion-collapse collapse" aria-labelledby="headingScaledData" data-bs-parent="#dataLineageAccordion">
                        <div class="accordion-body">
                            {% if plots.scaled_data %}
                            <div id="scaled-data-plot-container"></div>
                            <script>
                                var scaledDataPlot = {{ plots.scaled_data|safe }};
                                Plotly.newPlot('scaled-data-plot-container', scaledDataPlot.data, scaledDataPlot.layout, {responsive: true});
                            </script>
                            {% else %}
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle"></i> Scaled data plot not available.
                            </div>
                            {% endif %}
                            <div class="mt-3">
                                <button class="btn btn-outline-primary btn-sm" id="view-scaled-data-table">
                                    <i class="bi bi-table"></i> View Data Table
                                </button>
                                <button class="btn btn-outline-success btn-sm" id="export-scaled-data">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ARIMA Forecasts -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingArimaForecast">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseArimaForecast" aria-expanded="false" aria-controls="collapseArimaForecast">
                            <i class="bi bi-graph-up-arrow me-2"></i> ARIMA Forecasts
                        </button>
                    </h2>
                    <div id="collapseArimaForecast" class="accordion-collapse collapse" aria-labelledby="headingArimaForecast" data-bs-parent="#dataLineageAccordion">
                        <div class="accordion-body">
                            {% if plots.arima_forecast %}
                            <div id="arima-forecast-plot-container"></div>
                            <script>
                                var arimaForecastPlot = {{ plots.arima_forecast|safe }};
                                Plotly.newPlot('arima-forecast-plot-container', arimaForecastPlot.data, arimaForecastPlot.layout, {responsive: true});
                            </script>
                            {% else %}
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle"></i> ARIMA forecast plot not available.
                            </div>
                            {% endif %}
                            <div class="mt-3">
                                <button class="btn btn-outline-info btn-sm">
                                    <i class="bi bi-info-circle"></i> ARIMA forecasts show predicted future values with confidence intervals
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- GARCH Volatility -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingGarchVolatility">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGarchVolatility" aria-expanded="false" aria-controls="collapseGarchVolatility">
                            <i class="bi bi-lightning me-2"></i> GARCH Volatility Forecasts
                        </button>
                    </h2>
                    <div id="collapseGarchVolatility" class="accordion-collapse collapse" aria-labelledby="headingGarchVolatility" data-bs-parent="#dataLineageAccordion">
                        <div class="accordion-body">
                            {% if plots.garch_volatility %}
                            <div id="garch-volatility-plot-container"></div>
                            <script>
                                var garchVolatilityPlot = {{ plots.garch_volatility|safe }};
                                Plotly.newPlot('garch-volatility-plot-container', garchVolatilityPlot.data, garchVolatilityPlot.layout, {responsive: true});
                            </script>
                            {% else %}
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle"></i> GARCH volatility plot not available.
                            </div>
                            {% endif %}
                            <div class="mt-3">
                                <button class="btn btn-outline-info btn-sm">
                                    <i class="bi bi-info-circle"></i> GARCH volatility forecasts show expected risk levels over time
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Spillover Analysis -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingSpilloverPlot">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpilloverPlot" aria-expanded="false" aria-controls="collapseSpilloverPlot">
                            <i class="bi bi-shuffle me-2"></i> Spillover Analysis
                        </button>
                    </h2>
                    <div id="collapseSpilloverPlot" class="accordion-collapse collapse" aria-labelledby="headingSpilloverPlot" data-bs-parent="#dataLineageAccordion">
                        <div class="accordion-body">
                            {% if plots.spillover_heatmap %}
                            <div id="spillover-heatmap-plot-container"></div>
                            <script>
                                var spilloverHeatmapPlot = {{ plots.spillover_heatmap|safe }};
                                Plotly.newPlot('spillover-heatmap-plot-container', spilloverHeatmapPlot.data, spilloverHeatmapPlot.layout, {responsive: true});
                            </script>
                            {% else %}
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-triangle"></i> Spillover analysis plot not available.
                            </div>
                            {% endif %}
                            <div class="mt-3">
                                <button class="btn btn-outline-info btn-sm">
                                    <i class="bi bi-info-circle"></i> Spillover analysis shows how shocks spread between assets
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i>
                <strong>No plots available:</strong> Server-side plot generation failed or no data was provided.
                <br><small>Please check the Raw Data tab to see if analysis results are available.</small>
            </div>
            {% endif %}
        </div>

        <!-- Statistical Tests Tab -->
        <div class="tab-pane fade" id="statistical-tests" role="tabpanel" aria-labelledby="statistical-tests-tab">
            <!-- Stationarity Tests -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStationarity" aria-expanded="true" aria-controls="collapseStationarity">
                        <h5 class="card-title mb-0"><i class="bi bi-activity me-2"></i> Stationarity Tests (ADF)</h5>
                    </button>
                </div>
                <div id="collapseStationarity" class="collapse show">
                    <div class="card-body">
                        <div id="stationarity-results-container">
                            <!-- Per-symbol stationarity results -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Series Statistics -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeriesStats" aria-expanded="false" aria-controls="collapseSeriesStats">
                        <h5 class="card-title mb-0"><i class="bi bi-bar-chart me-2"></i> Series Statistics</h5>
                    </button>
                </div>
                <div id="collapseSeriesStats" class="collapse">
                    <div class="card-body">
                        <div id="series-statistics-container">
                            <!-- Series statistics table -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Models & Forecasts Tab -->
        <div class="tab-pane fade" id="models" role="tabpanel" aria-labelledby="models-tab">
            <!-- ARIMA Models -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseArima" aria-expanded="true" aria-controls="collapseArima">
                        <h5 class="card-title mb-0"><i class="bi bi-graph-up-arrow me-2"></i> ARIMA Models</h5>
                    </button>
                </div>
                <div id="collapseArima" class="collapse show">
                    <div class="card-body">
                        <div id="arima-results-container">
                            <!-- Per-symbol ARIMA results with nested tabs -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- GARCH Models -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGarch" aria-expanded="false" aria-controls="collapseGarch">
                        <h5 class="card-title mb-0"><i class="bi bi-lightning me-2"></i> GARCH Models</h5>
                    </button>
                </div>
                <div id="collapseGarch" class="collapse">
                    <div class="card-body">
                        <div id="garch-results-container">
                            <!-- Per-symbol GARCH results with nested tabs -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- VAR Model -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVar" aria-expanded="false" aria-controls="collapseVar">
                        <h5 class="card-title mb-0"><i class="bi bi-vector-pen me-2"></i> VAR Model</h5>
                    </button>
                </div>
                <div id="collapseVar" class="collapse">
                    <div class="card-body">
                        <div id="var-results-container">
                            <!-- VAR model results -->
                            <div class="row">
                                <div class="col-md-6">
                                    <h6><i class="bi bi-gear"></i> Model Specification</h6>
                                    <div id="var-model-specs"></div>
                                </div>
                                <div class="col-md-6">
                                    <h6><i class="bi bi-table"></i> FEVD Matrix</h6>
                                    <div id="var-fevd-matrix"></div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <h6><i class="bi bi-chat-text"></i> Interpretations</h6>
                                <div id="var-interpretations"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Spillover Analysis Tab -->
        <div class="tab-pane fade" id="spillover-analysis" role="tabpanel" aria-labelledby="spillover-analysis-tab">
            <!-- Total Spillover Index -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0"><i class="bi bi-speedometer me-2"></i> Total Spillover Index</h5>
                </div>
                <div class="card-body">
                    <div id="total-spillover-container">
                        <!-- Total spillover visualization and metrics -->
                    </div>
                </div>
            </div>
            
            <!-- Directional Spillovers -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDirectionalSpillover" aria-expanded="true" aria-controls="collapseDirectionalSpillover">
                        <h5 class="card-title mb-0"><i class="bi bi-arrow-left-right me-2"></i> Directional Spillovers</h5>
                    </button>
                </div>
                <div id="collapseDirectionalSpillover" class="collapse show">
                    <div class="card-body">
                        <div id="directional-spillover-container">
                            <!-- Directional spillover charts and tables -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Net Spillovers -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNetSpillover" aria-expanded="false" aria-controls="collapseNetSpillover">
                        <h5 class="card-title mb-0"><i class="bi bi-plus-minus me-2"></i> Net Spillovers</h5>
                    </button>
                </div>
                <div id="collapseNetSpillover" class="collapse">
                    <div class="card-body">
                        <div id="net-spillover-container">
                            <!-- Net spillover visualization -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pairwise Spillovers -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePairwiseSpillover" aria-expanded="false" aria-controls="collapsePairwiseSpillover">
                        <h5 class="card-title mb-0"><i class="bi bi-diagram-2 me-2"></i> Pairwise Spillovers</h5>
                    </button>
                </div>
                <div id="collapsePairwiseSpillover" class="collapse">
                    <div class="card-body">
                        <div id="pairwise-spillover-container">
                            <!-- Pairwise spillover table and heatmap -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Granger Causality -->
            <div class="card mb-4">
                <div class="card-header">
                    <button class="btn btn-link text-decoration-none w-100 text-start p-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGrangerCausality" aria-expanded="false" aria-controls="collapseGrangerCausality">
                        <h5 class="card-title mb-0"><i class="bi bi-arrow-through-heart me-2"></i> Granger Causality</h5>
                    </button>
                </div>
                <div id="collapseGrangerCausality" class="collapse">
                    <div class="card-body">
                        <div id="granger-causality-container">
                            <!-- Granger causality results and interpretations -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Raw Data Tab -->
        <div class="tab-pane fade" id="raw-data" role="tabpanel" aria-labelledby="raw-data-tab">
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" id="rawDataTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="original-raw-tab" data-bs-toggle="tab" data-bs-target="#original-raw" 
                                    type="button" role="tab" aria-controls="original-raw" aria-selected="true">
                                Original Data
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="returns-raw-tab" data-bs-toggle="tab" data-bs-target="#returns-raw" 
                                    type="button" role="tab" aria-controls="returns-raw" aria-selected="false">
                                Returns Data
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="scaled-raw-tab" data-bs-toggle="tab" data-bs-target="#scaled-raw" 
                                    type="button" role="tab" aria-controls="scaled-raw" aria-selected="false">
                                Scaled Data
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pre-garch-raw-tab" data-bs-toggle="tab" data-bs-target="#pre-garch-raw" 
                                    type="button" role="tab" aria-controls="pre-garch-raw" aria-selected="false">
                                Pre-GARCH Data
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="post-garch-raw-tab" data-bs-toggle="tab" data-bs-target="#post-garch-raw" 
                                    type="button" role="tab" aria-controls="post-garch-raw" aria-selected="false">
                                Post-GARCH Data
                            </button>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content" id="rawDataTabContent">
                        <!-- Original Data Table -->
                        <div class="tab-pane fade show active" id="original-raw" role="tabpanel" aria-labelledby="original-raw-tab">
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-outline-primary" id="export-original-csv">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover table-sm" id="original-data-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Date</th>
                                            <!-- Dynamically filled -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dynamically filled -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Returns Data Table -->
                        <div class="tab-pane fade" id="returns-raw" role="tabpanel" aria-labelledby="returns-raw-tab">
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-outline-primary" id="export-returns-csv">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover table-sm" id="returns-data-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Date</th>
                                            <!-- Dynamically filled -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dynamically filled -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Scaled Data Table -->
                        <div class="tab-pane fade" id="scaled-raw" role="tabpanel" aria-labelledby="scaled-raw-tab">
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-outline-primary" id="export-scaled-csv">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover table-sm" id="scaled-data-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Date</th>
                                            <!-- Dynamically filled -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dynamically filled -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Pre-GARCH Data Table -->
                        <div class="tab-pane fade" id="pre-garch-raw" role="tabpanel" aria-labelledby="pre-garch-raw-tab">
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-outline-primary" id="export-pre-garch-csv">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover table-sm" id="pre-garch-data-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Date</th>
                                            <!-- Dynamically filled -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dynamically filled -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Post-GARCH Data Table -->
                        <div class="tab-pane fade" id="post-garch-raw" role="tabpanel" aria-labelledby="post-garch-raw-tab">
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-outline-primary" id="export-post-garch-csv">
                                    <i class="bi bi-download"></i> Export CSV
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover table-sm" id="post-garch-data-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Date</th>
                                            <!-- Dynamically filled -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dynamically filled -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/results.js' %}"></script>
{% endblock %}
